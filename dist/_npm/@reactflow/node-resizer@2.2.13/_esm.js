/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@reactflow/node-resizer@2.2.13/dist/esm/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e,{memo as t,useRef as i,useEffect as n}from"../../react@18.2.0/_esm.js";import o from"../../classcat@5.0.5/_esm.js";import{drag as r}from"../../d3-drag@3.0.0/_esm.js";import{select as s}from"../../d3-selection@3.0.0/_esm.js";import{useNodeId as a,useStoreApi as d,useGetPointerPosition as c,clamp as h}from"../core@11.11.3/_esm.js";var l;!function(e){e.Line="line",e.Handle="handle"}(l||(l={}));const p={width:0,height:0,x:0,y:0},m={...p,pointerX:0,pointerY:0,aspectRatio:1};var u=t((function({nodeId:t,position:u,variant:g=l.Handle,className:f,style:R={},children:y,color:x,minWidth:z=10,minHeight:S=10,maxWidth:v=Number.MAX_VALUE,maxHeight:w=Number.MAX_VALUE,keepAspectRatio:N=!1,shouldResize:b,onResizeStart:A,onResize:E,onResizeEnd:H}){const W=a(),X="string"==typeof t?t:W,L=d(),k=i(null),C=i(m),I=i(p),M=c(),_=g===l.Line?"right":"bottom-right",V=u??_;n((()=>{if(!k.current||!X)return;const e=s(k.current),t=V.includes("right")||V.includes("left"),i=V.includes("bottom")||V.includes("top"),n=V.includes("left"),o=V.includes("top"),a=r().on("start",(e=>{const t=L.getState().nodeInternals.get(X),{xSnapped:i,ySnapped:n}=M(e);I.current={width:t?.width??0,height:t?.height??0,x:t?.position.x??0,y:t?.position.y??0},C.current={...I.current,pointerX:i,pointerY:n,aspectRatio:I.current.width/I.current.height},A?.(e,{...I.current})})).on("drag",(e=>{const{nodeInternals:r,triggerNodeChanges:s}=L.getState(),{xSnapped:a,ySnapped:d}=M(e),c=r.get(X);if(c){const r=[],{pointerX:l,pointerY:p,width:m,height:u,x:g,y:f,aspectRatio:R}=C.current,{x:y,y:x,width:A,height:H}=I.current,W=Math.floor(t?a-l:0),L=Math.floor(i?d-p:0);let k=h(m+(n?-W:W),z,v),M=h(u+(o?-L:L),S,w);if(N){const e=k/M,n=t&&i;k=e<=R&&n||i&&!t?M*R:k,M=e>R&&n||t&&!i?k/R:M,k>=v?(k=v,M=v/R):k<=z&&(k=z,M=z/R),M>=w?(M=w,k=w*R):M<=S&&(M=S,k=S*R)}const _=k!==A,V=M!==H;if(n||o){const e=n?g-(k-m):g,t=o?f-(M-u):f,i=e!==y&&_,s=t!==x&&V;if(i||s){const n={id:c.id,type:"position",position:{x:i?e:y,y:s?t:x}};r.push(n),I.current.x=n.position.x,I.current.y=n.position.y}}if(_||V){const e={id:X,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:k,height:M}};r.push(e),I.current.width=k,I.current.height=M}if(0===r.length)return;const Y=function({width:e,prevWidth:t,height:i,prevHeight:n,invertX:o,invertY:r}){const s=e-t,a=i-n,d=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(d[0]=-1*d[0]),a&&r&&(d[1]=-1*d[1]),d}({width:I.current.width,prevWidth:A,height:I.current.height,prevHeight:H,invertX:n,invertY:o}),U={...I.current,direction:Y},F=b?.(e,U);if(!1===F)return;E?.(e,U),s(r)}})).on("end",(e=>{const t={id:X,type:"dimensions",resizing:!1};H?.(e,{...I.current}),L.getState().triggerNodeChanges([t])}));return e.call(a),()=>{e.on(".drag",null)}}),[X,V,z,S,v,w,N,M,A,E,H]);const Y=V.split("-"),U=g===l.Line?"borderColor":"backgroundColor",F=x?{...R,[U]:x}:R;return e.createElement("div",{className:o(["react-flow__resize-control","nodrag",...Y,g,f]),ref:k,style:F},y)}));const g=["top-left","top-right","bottom-left","bottom-right"],f=["top","right","bottom","left"];function R({nodeId:t,isVisible:i=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:s,color:a,minWidth:d=10,minHeight:c=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:R,onResizeStart:y,onResize:x,onResizeEnd:z}){return i?e.createElement(e.Fragment,null,f.map((i=>e.createElement(u,{key:i,className:r,style:s,nodeId:t,position:i,variant:l.Line,color:a,minWidth:d,minHeight:c,maxWidth:h,maxHeight:p,onResizeStart:y,keepAspectRatio:m,shouldResize:R,onResize:x,onResizeEnd:z}))),g.map((i=>e.createElement(u,{key:i,className:n,style:o,nodeId:t,position:i,color:a,minWidth:d,minHeight:c,maxWidth:h,maxHeight:p,onResizeStart:y,keepAspectRatio:m,shouldResize:R,onResize:x,onResizeEnd:z})))):null}export{u as NodeResizeControl,R as NodeResizer,l as ResizeControlVariant};export default null;
