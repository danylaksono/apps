/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@mantine/form@7.9.1/esm/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{useLayoutEffect as e,useEffect as t,useState as r,useCallback as n,useRef as o,createContext as i,useContext as s,forwardRef as u,useMemo as a}from"../../react@18.3.1/_esm.js";import{klona as l}from"../../klona@2.0.6/full/_esm.js";import c from"../../fast-deep-equal@3.1.3/_esm.js";import{jsx as d}from"../../react@18.3.1/jsx-runtime/_esm.js";function f(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function m(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const h="undefined"!=typeof window?e:t;function p(e){m(e);return{setFieldValue:(t,r)=>f(`mantine-form:${e}:set-field-value`,{path:t,value:r}),setValues:t=>f(`mantine-form:${e}:set-values`,t),setInitialValues:t=>f(`mantine-form:${e}:set-initial-values`,t),setErrors:t=>f(`mantine-form:${e}:set-errors`,t),setFieldError:(t,r)=>f(`mantine-form:${e}:set-field-error`,{path:t,error:r}),clearFieldError:t=>f(`mantine-form:${e}:clear-field-error`,t),clearErrors:()=>f(`mantine-form:${e}:clear-errors`),reset:()=>f(`mantine-form:${e}:reset`),validate:()=>f(`mantine-form:${e}:validate`),validateField:t=>f(`mantine-form:${e}:validate-field`,t),reorderListItem:(t,r)=>f(`mantine-form:${e}:reorder-list-item`,{path:t,payload:r}),removeListItem:(t,r)=>f(`mantine-form:${e}:remove-list-item`,{path:t,index:r}),insertListItem:(t,r,n)=>f(`mantine-form:${e}:insert-list-item`,{path:t,index:n,item:r}),setDirty:t=>f(`mantine-form:${e}:set-dirty`,t),setTouched:t=>f(`mantine-form:${e}:set-touched`,t),resetDirty:t=>f(`mantine-form:${e}:reset-dirty`,t),resetTouched:()=>f(`mantine-form:${e}:reset-touched`)}}function y(e,t){h((()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)}),[e])}function v(e){return t=>{if(t)if("function"==typeof t)e(t);else if("object"==typeof t&&"nativeEvent"in t){const{currentTarget:r}=t;r instanceof HTMLInputElement?"checkbox"===r.type?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t);else e(t)}}function E(e){return null===e||"object"!=typeof e?{}:Object.keys(e).reduce(((t,r)=>{const n=e[r];return null!=n&&!1!==n&&(t[r]=n),t}),{})}function V(e,t){if(null===t||"object"!=typeof t)return{};const r={...t};return Object.keys(t).forEach((t=>{t.includes(`${String(e)}.`)&&delete r[t]})),r}function $(e,t){const r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function g(e,t,r,n){if(void 0===t)return r;const o=`${String(e)}`;let i=r;-1===n&&(i=V(`${o}.${t}`,i));const s={...i},u=new Set;return Object.entries(i).filter((([e])=>{if(!e.startsWith(`${o}.`))return!1;const r=$(e,o);return!Number.isNaN(r)&&r>=t})).forEach((([e,t])=>{const r=$(e,o),i=e.replace(`${o}.${r}`,`${o}.${r+n}`);s[i]=t,u.add(i),u.has(e)||delete s[e]})),s}function b(e){return"string"!=typeof e?[]:e.split(".")}function F(e,t){const r=b(e);if(0===r.length||"object"!=typeof t||null===t)return;let n=t[r[0]];for(let e=1;e<r.length&&void 0!==n;e+=1)n=n[r[e]];return n}function S(e,t,r){const n=b(e);if(0===n.length)return r;const o=l(r);if(1===n.length)return o[n[0]]=t,o;let i=o[n[0]];for(let e=1;e<n.length-1;e+=1){if(void 0===i)return o;i=i[n[e]]}return i[n[n.length-1]]=t,o}function T(e,{from:t,to:r},n){const o=F(e,n);if(!Array.isArray(o))return n;const i=[...o],s=o[t];return i.splice(t,1),i.splice(r,0,s),S(e,i,n)}function D(e,t,r,n){const o=F(e,n);if(!Array.isArray(o))return n;const i=[...o];return i.splice("number"==typeof r?r:i.length,0,t),S(e,i,n)}function I(e,t,r){const n=F(e,r);return Array.isArray(n)?S(e,n.filter(((e,r)=>r!==t)),r):r}function j({$values:e,$errors:t,$status:r}){return{reorderListItem:n(((n,o)=>{r.clearFieldDirty(n),t.setErrors((e=>function(e,{from:t,to:r},n){const o=`${e}.${t}`,i=`${e}.${r}`,s={...n};return Object.keys(n).every((e=>{let t,r;if(e.startsWith(o)&&(t=e,r=e.replace(o,i)),e.startsWith(i)&&(t=e.replace(i,o),r=e),t&&r){const e=s[t],n=s[r];return void 0===n?delete s[t]:s[t]=n,void 0===e?delete s[r]:s[r]=e,!1}return!0})),s}(n,o,e))),e.setValues({values:T(n,o,e.refValues.current),updateState:!0})}),[]),removeListItem:n(((n,o)=>{r.clearFieldDirty(n),t.setErrors((e=>g(n,o,e,-1))),e.setValues({values:I(n,o,e.refValues.current),updateState:!0})}),[]),insertListItem:n(((n,o,i)=>{r.clearFieldDirty(n),t.setErrors((e=>g(n,i,e,1))),e.setValues({values:D(n,o,i,e.refValues.current),updateState:!0})}),[])}}function w(e,t){const r=Object.keys(e);if("string"==typeof t){const n=r.filter((e=>e.startsWith(`${t}.`)));return e[t]||n.some((t=>e[t]))||!1}return r.some((t=>e[t]))}function k(e){const t=E(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function A(e,t,r="",n={}){return"object"!=typeof e||null===e?n:Object.keys(e).reduce(((n,o)=>{const i=e[o],s=`${""===r?"":`${r}.`}${o}`,u=F(s,t);let a=!1;return"function"==typeof i&&(n[s]=i(u,t,s)),"object"==typeof i&&Array.isArray(u)&&(a=!0,u.forEach(((e,r)=>A(i,t,`${s}.${r}`,n)))),"object"==typeof i&&"object"==typeof u&&null!==u&&(a||A(i,t,s,n)),n}),n)}function L(e,t){return k("function"==typeof e?e(t):A(e,t))}function O(e,t,r){if("string"!=typeof e)return{hasError:!1,error:null};const n=L(t,r),o=Object.keys(n.errors).find((t=>e.split(".").every(((e,r)=>e===t.split(".")[r]))));return{hasError:!!o,error:o?n.errors[o]:null}}const x="__MANTINE_FORM_INDEX__";function C(e,t){return!!t&&("boolean"==typeof t?t:!!Array.isArray(t)&&t.includes(e.replace(/[.][0-9]/g,`.${x}`)))}function z({name:e,mode:i="controlled",initialValues:s,initialErrors:u={},initialDirty:a={},initialTouched:l={},clearInputErrorOnChange:d=!0,validateInputOnChange:f=!1,validateInputOnBlur:h=!1,onValuesChange:p,transformValues:$=(e=>e),enhanceGetInputProps:g,validate:b}={}){const T=function(e){const[t,o]=r(E(e)),i=n((e=>{o((t=>E("function"==typeof e?e(t):e)))}),[]),s=n((()=>o({})),[]),u=n((e=>{void 0!==t[e]&&i((t=>{const r={...t};return delete r[e],r}))}),[t]),a=n(((e,r)=>{null==r||!1===r?u(e):t[e]!==r&&i((t=>({...t,[e]:r})))}),[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:u}}(u),D=function({initialValues:e,onValuesChange:t,mode:i}){const s=o(!1),[u,a]=r(e||{}),l=o(u),c=o(u),d=n((({values:e,subscribers:r,updateState:n=!0,mergeWithPreviousValues:o=!0})=>{const i=l.current,s=e instanceof Function?e(l.current):e,u=o?{...i,...s}:s;l.current=u,n&&a(u),t?.(u,i),r?.filter(Boolean).forEach((e=>e({updatedValues:u,previousValues:i})))}),[t]),f=n((e=>{const t=F(e.path,l.current),r=e.value instanceof Function?e.value(t):e.value;if(t!==r){const t=l.current,n=S(e.path,r,l.current);d({values:n,updateState:e.updateState}),e.subscribers?.filter(Boolean).forEach((r=>r({path:e.path,updatedValues:n,previousValues:t})))}}),[]),m=n((e=>{c.current=e}),[]),h=n(((e,t)=>{s.current||(s.current=!0,d({values:e,updateState:"controlled"===i}),m(e),t())}),[]),p=n((()=>{d({values:c.current,updateState:!0,mergeWithPreviousValues:!1})}),[]),y=n((()=>l.current),[]);return{initialized:s,stateValues:u,refValues:l,valuesSnapshot:c,setValues:d,setFieldValue:f,resetValues:p,setValuesSnapshot:m,initialize:h,getValues:y}}({initialValues:s,onValuesChange:p,mode:i}),I=function({initialDirty:e,initialTouched:t,mode:i,$values:s}){const[u,a]=r(t),[l,d]=r(e),f=o(t),m=o(e),h=n((e=>{const t="function"==typeof e?e(f.current):e;f.current=t,"controlled"===i&&a(t)}),[]),p=n((e=>{const t="function"==typeof e?e(m.current):e;m.current=t,"controlled"===i&&d(t)}),[]),y=n((()=>h({})),[]),v=n(((e,t)=>{h((r=>w(r,e)===t?r:{...r,[e]:t}))}),[]),E=n(((e,t)=>{p((r=>w(r,e)===t?r:{...r,[e]:t}))}),[]),$=n((e=>w(f.current,e)),[]),g=n((e=>p((t=>{if("string"!=typeof e)return t;const r=V(e,t);return delete r[e],c(r,t)?t:r}))),[]),b=n((e=>{if(e){const t=F(e,m.current);if("boolean"==typeof t)return t;const r=F(e,s.refValues.current),n=F(e,s.valuesSnapshot.current);return!c(r,n)}return Object.keys(m.current).length>0?w(m.current):!c(s.refValues.current,s.valuesSnapshot.current)}),[]),S=n((()=>m.current),[]),T=n((()=>f.current),[]);return{touchedState:u,dirtyState:l,touchedRef:f,dirtyRef:m,setTouched:h,setDirty:p,resetDirty:e=>{const t=e?{...e,...s.refValues.current}:s.refValues.current;s.setValuesSnapshot(t),p({})},resetTouched:y,isTouched:$,setFieldTouched:v,setFieldDirty:E,setTouchedState:a,setDirtyState:d,clearFieldDirty:g,isDirty:b,getDirty:S,getTouched:T}}({initialDirty:a,initialTouched:l,$values:D,mode:i}),k=j({$values:D,$errors:T,$status:I}),A=function({$status:e}){const r=o({}),i=n(((e,n)=>{t((()=>(r.current[e]=r.current[e]||[],r.current[e].push(n),()=>{r.current[e]=r.current[e].filter((e=>e!==n))})),[n])}),[]),s=n((t=>r.current[t]?r.current[t].map((r=>n=>r({previousValue:F(t,n.previousValues),value:F(t,n.updatedValues),touched:e.isTouched(t),dirty:e.isDirty(t)}))):[]),[]);return{subscribers:r,watch:i,getFieldSubscribers:s}}({$status:I}),[x,z]=r(0),[P,R]=r({}),_=n((()=>{D.resetValues(),T.clearErrors(),I.resetDirty(),I.resetTouched(),"uncontrolled"===i&&z((e=>e+1))}),[]),B=n((e=>{D.initialize(e,(()=>"uncontrolled"===i&&z((e=>e+1))))}),[]),N=n(((e,t,r)=>{const n=C(e,f);I.clearFieldDirty(e),I.setFieldTouched(e,!0),!n&&d&&T.clearFieldError(e),D.setFieldValue({path:e,value:t,updateState:"controlled"===i,subscribers:[...A.getFieldSubscribers(e),n?t=>{const r=O(e,b,t.updatedValues);r.hasError?T.setFieldError(e,r.error):T.clearFieldError(e)}:null,!1!==r?.forceUpdate&&"controlled"!==i?()=>R((t=>({...t,[e]:(t[e]||0)+1}))):null]})}),[p,b]),W=n((e=>{const t=D.refValues.current;D.setValues({values:e,updateState:"controlled"===i}),d&&T.clearErrors(),"uncontrolled"===i&&z((e=>e+1)),Object.keys(A.subscribers.current).forEach((e=>{F(e,D.refValues.current)!==F(e,t)&&A.getFieldSubscribers(e).forEach((e=>e({previousValues:t,updatedValues:D.refValues.current})))}))}),[p,d]),M=n((()=>{const e=L(b,D.refValues.current);return T.setErrors(e.errors),e}),[b]),Z=n((e=>{const t=O(e,b,D.refValues.current);return t.hasError?T.setFieldError(e,t.error):T.clearFieldError(e),t}),[b]),H=n((e=>{e.preventDefault(),_()}),[]),K=n((e=>e?!O(e,b,D.refValues.current).hasError:!L(b,D.refValues.current).hasErrors),[b]),U={watch:A.watch,initialized:D.initialized.current,values:D.stateValues,getValues:D.getValues,setInitialValues:D.setValuesSnapshot,initialize:B,setValues:W,setFieldValue:N,errors:T.errorsState,setErrors:T.setErrors,setFieldError:T.setFieldError,clearFieldError:T.clearFieldError,clearErrors:T.clearErrors,resetDirty:I.resetDirty,setTouched:I.setTouched,setDirty:I.setDirty,isTouched:I.isTouched,resetTouched:I.resetTouched,isDirty:I.isDirty,getTouched:I.getTouched,getDirty:I.getDirty,reorderListItem:k.reorderListItem,insertListItem:k.insertListItem,removeListItem:k.removeListItem,reset:_,validate:M,validateField:Z,getInputProps:(e,{type:t="input",withError:r=!0,withFocus:n=!0,...o}={})=>{const s={onChange:v((t=>N(e,t,{forceUpdate:!1})))};return r&&(s.error=T.errorsState[e]),"checkbox"===t?s["controlled"===i?"checked":"defaultChecked"]=F(e,D.refValues.current):s["controlled"===i?"value":"defaultValue"]=F(e,D.refValues.current),n&&(s.onFocus=()=>I.setFieldTouched(e,!0),s.onBlur=()=>{if(C(e,h)){const t=O(e,b,D.refValues.current);t.hasError?T.setFieldError(e,t.error):T.clearFieldError(e)}}),Object.assign(s,g?.({inputProps:s,field:e,options:{type:t,withError:r,withFocus:n,...o},form:U}))},onSubmit:(e,t)=>r=>{r?.preventDefault();const n=M();n.hasErrors?t?.(n.errors,D.refValues.current,r):e?.($(D.refValues.current),r)},onReset:H,isValid:K,getTransformedValues:e=>$(e||D.refValues.current),key:e=>`${x}-${e}-${P[e]||0}`};return function(e,t){e&&m(e),y(`mantine-form:${e}:set-field-value`,(e=>t.setFieldValue(e.detail.path,e.detail.value))),y(`mantine-form:${e}:set-values`,(e=>t.setValues(e.detail))),y(`mantine-form:${e}:set-initial-values`,(e=>t.setInitialValues(e.detail))),y(`mantine-form:${e}:set-errors`,(e=>t.setErrors(e.detail))),y(`mantine-form:${e}:set-field-error`,(e=>t.setFieldError(e.detail.path,e.detail.error))),y(`mantine-form:${e}:clear-field-error`,(e=>t.clearFieldError(e.detail))),y(`mantine-form:${e}:clear-errors`,t.clearErrors),y(`mantine-form:${e}:reset`,t.reset),y(`mantine-form:${e}:validate`,t.validate),y(`mantine-form:${e}:validate-field`,(e=>t.validateField(e.detail))),y(`mantine-form:${e}:reorder-list-item`,(e=>t.reorderListItem(e.detail.path,e.detail.payload))),y(`mantine-form:${e}:remove-list-item`,(e=>t.removeListItem(e.detail.path,e.detail.index))),y(`mantine-form:${e}:insert-list-item`,(e=>t.insertListItem(e.detail.path,e.detail.item,e.detail.index))),y(`mantine-form:${e}:set-dirty`,(e=>t.setDirty(e.detail))),y(`mantine-form:${e}:set-touched`,(e=>t.setTouched(e.detail))),y(`mantine-form:${e}:reset-dirty`,(e=>t.resetDirty(e.detail))),y(`mantine-form:${e}:reset-touched`,t.resetTouched)}(e,U),U}function P(){const e=i(null);return[function({form:t,children:r}){return d(e.Provider,{value:t,children:r})},function(){const t=s(e);if(!t)throw new Error("useFormContext was called outside of FormProvider context");return t},z]}const R=u((({form:e,onSubmit:t,onReset:r,...n},o)=>d("form",{...n,onSubmit:e.onSubmit("function"==typeof t?t:()=>{}),onReset:t=>{r?.(t),e.onReset(t)},ref:o})));function _(e){const t=e||!0;return e=>"string"==typeof e?e.trim().length>0?null:t:Array.isArray(e)?e.length>0?null:t:null==e||!1===e?t:null}function B(e,t){const r=t||!0;return t=>"string"!=typeof t?r:e.test(t)?null:r}function N(e){return B(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function W(e,t){if("number"==typeof e)return t.length===e;const{max:r,min:n}=e;let o=!0;return"number"==typeof r&&t.length>r&&(o=!1),"number"==typeof n&&t.length<n&&(o=!1),o}function M(e,t){const r=t||!0;return t=>"string"==typeof t?W(e,t.trim())?null:r:"object"==typeof t&&null!==t&&"length"in t&&W(e,t)?null:r}function Z({min:e,max:t},r){const n=r||!0;return r=>{if("number"!=typeof r)return n;let o=!0;return"number"==typeof e&&r<e&&(o=!1),"number"==typeof t&&r>t&&(o=!1),o?null:n}}function H(e,t){const r=t||!0;return(t,n)=>n&&e in n&&t===n[e]?null:r}function K({mode:e="controlled",clearErrorOnChange:t=!0,initialValue:i,initialError:s=null,initialTouched:u=!1,onValueChange:l,validateOnChange:c=!1,validateOnBlur:d=!1,validate:f,resolveValidationError:m,type:h="input"}){const[p,y]=r(i),E=o(p),[V,$]=r(0),[g,b]=r(s||null),F=o(u||!1),[,S]=r(F.current),[T,D]=r(!1),I=a((()=>m||(e=>e)),[m]),j=n(((t,{updateState:r="controlled"===e}={})=>{F.current=t,r&&S(t)}),[]),w=n((async(r,{updateKey:n="uncontrolled"===e,updateState:o="controlled"===e}={})=>{E.current!==r&&(E.current=r,l?.(r),t&&null!==g&&b(null),o&&y(r),n&&$((e=>e+1)),c&&x())}),[g,t]),k=n((()=>{w(i),b(null),j(!1)}),[i]),A=n((()=>E.current),[]),L=n((()=>F.current),[]),O=n((()=>E.current!==i),[i]),x=n((async()=>{const e=f?.(E.current);if(!(e instanceof Promise))return b(e),e;D(!0);try{const t=await e;D(!1),b(t)}catch(e){D(!1);const t=I(e);return b(t),t}}),[]),z=n((()=>j(!1)),[]);return{key:V,getValue:A,setValue:w,reset:k,getInputProps:({withError:t=!0,withFocus:r=!0}={})=>{const n={onChange:v((e=>w(e,{updateKey:!1})))};return t&&(n.error=g),"checkbox"===h?n["controlled"===e?"checked":"defaultChecked"]=E.current:n["controlled"===e?"value":"defaultValue"]=E.current,r&&(n.onFocus=()=>{j(!0)},n.onBlur=()=>{C("",!!d)&&x()}),n},isValidating:T,validate:x,error:g,setError:b,isTouched:L,isDirty:O,resetTouched:z}}function U(e){return t=>{const r=e.safeParse(t);if(r.success)return{};const n={};return r.error.errors.forEach((e=>{n[e.path.join(".")]=e.message})),n}}function q(e){return function(t){const r={},[n]=e.validate(t);return n?(n.failures().forEach((e=>{const t=e.path.join(" ");r[e.path.join(".")]=`${t}: ${e.message}`})),r):r}}function G(e){const t=e;return e=>{try{return t.validateSync(e,{abortEarly:!1}),{}}catch(e){const t={};return e.inner.forEach((e=>{t[e.path.replaceAll("[",".").replaceAll("]","")]=e.message})),t}}}function X(e,t){const r=e;return e=>{const n=r.validate(e,{abortEarly:!1,...t});if(!n.error)return{};const o={};return n.error.details.forEach((e=>{o[e.path.join(".")]=e.message})),o}}export{x as FORM_INDEX,R as Form,p as createFormActions,P as createFormContext,M as hasLength,N as isEmail,Z as isInRange,_ as isNotEmpty,X as joiResolver,B as matches,H as matchesField,q as superstructResolver,K as useField,z as useForm,G as yupResolver,U as zodResolver};export default null;
